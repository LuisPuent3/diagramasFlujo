<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">
  <process id="gestionInventarios" name="Gestión de Inventarios y Pedidos" isExecutable="false">
    <startEvent id="start" name="Inicio"/>
    <sequenceFlow id="flow1" sourceRef="start" targetRef="solicitudCliente"/>
    <task id="solicitudCliente" name="Solicitud del Cliente"/>
    <sequenceFlow id="flow2" sourceRef="solicitudCliente" targetRef="verificarStock"/>
    <task id="verificarStock" name="Verificar Disponibilidad de Stock"/>
    <exclusiveGateway id="decisionStock" name="Stock Disponible?"/>
    <sequenceFlow id="flow3" sourceRef="verificarStock" targetRef="decisionStock"/>
    
    <!-- Si hay stock disponible -->
    <sequenceFlow id="flow4" sourceRef="decisionStock" targetRef="actualizarInventario" name="Sí"/>
    <task id="actualizarInventario" name="Actualizar Inventario"/>
    <sequenceFlow id="flow5" sourceRef="actualizarInventario" targetRef="generarReporte"/>

    <!-- Si no hay stock disponible -->
    <sequenceFlow id="flow6" sourceRef="decisionStock" targetRef="notificarFaltaStock" name="No"/>
    <task id="notificarFaltaStock" name="Notificar Falta de Stock"/>
    <sequenceFlow id="flow7" sourceRef="notificarFaltaStock" targetRef="generarReporte"/>

    <task id="generarReporte" name="Generar Reporte de Productos Disponibles"/>
    <sequenceFlow id="flow8" sourceRef="generarReporte" targetRef="confirmarDisponibilidad"/>
    <task id="confirmarDisponibilidad" name="Confirmar Disponibilidad al Cliente"/>
    <sequenceFlow id="flow9" sourceRef="confirmarDisponibilidad" targetRef="end"/>
    <endEvent id="end" name="Fin"/>
  </process>
</definitions>
